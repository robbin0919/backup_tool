# Robocopy 參數說明文件

這是 `sync_config.json` 中 `robocopyOptions` 可用參數的說明文件。

| 參數 (Key)              | Robocopy 命令 | 類型 (Type) | 說明                                                                                   |
| ----------------------- | ------------- | ----------- | -------------------------------------------------------------------------------------- |
| `mirror`                | `/MIR`        | `boolean`   | **鏡像同步**。此選項會讓目標目錄與來源目錄完全一致，會刪除目標端多餘的檔案。         |
| `copyDirectoryTimestamps` | `/DCOPY:T`    | `boolean`   | **複製目錄時間戳**。                                                                   |
| `retryCount`            | `/R:n`        | `integer`   | **重試次數**。設定檔案複製失敗後的重試次數 `n`。                                       |
| `retryWaitTime`         | `/W:n`        | `integer`   | **重試等待時間**。設定每次重試之間要等待 `n` 秒。                                      |
| `logPath`               | `/LOG+:path`  | `string`    | **日誌路徑**。指定存放日誌的目錄，腳本會自動產生檔名。                                 |
| `logTee`                | `/TEE`        | `boolean`   | **螢幕與日誌同時輸出**。將狀態同時顯示在主控台視窗與日誌檔案中。                     |
| `extraArgs`             | (多樣)        | `array`     | **額外參數**。一個包含額外 Robocopy 參數的字串陣列。詳見下方說明。                 |

---

### `extraArgs` 詳細說明

`extraArgs` 允許您傳遞腳本未直接提供的任何 Robocopy 參數。這是一個字串陣列，其中參數與其值（如果有的話）應該是分開的陣列元素。

以下是一些常用參數範例：

| 參數        | 說明                                       | `sync_config.json` 中的 `extraArgs` 範例                               |
| :---------- | :----------------------------------------- | :------------------------------------------------------------------- |
| `/XF [檔案]`  | **排除檔案** (Exclude File)。可使用萬用字元 `*`。 | `["/XF", "*.tmp", "*.log"]`                                           |
| `/XD [目錄]`  | **排除目錄** (Exclude Directory)。可使用萬用字元 `*`。 | `["/XD", "temp", "node_modules", "obj"]`                             |
| `/MAXAGE:n` | **最長檔案存留時間**。排除比 `n` 天更早的檔案。 | `["/MAXAGE:30"]` (排除超過30天的舊檔案)                            |
| `/MINAGE:n` | **最短檔案存留時間**。排除比 `n` 天更新的檔案。 | `["/MINAGE:2"]` (排除2天內的新檔案，常用於穩定備份)              |
| `/COPY:flag`| **指定要複製的檔案內容**。預設為 `/COPY:DAT` (D=資料, A=屬性, T=時間戳)。 | `["/COPY:DATSOU"]` (S=安全性=NTFS ACLs, O=擁有者資訊, U=稽核資訊) |
| `/SEC`      | **複製安全性設定**。等同於 `/COPY:DATS`。    | `["/SEC"]`                                                           |
| `/NJH`      | **無作業標頭** (No Job Header)。不在日誌中輸出 Robocopy 作業標頭。 | `["/NJH"]`                                                           |
| `/NJS`      | **無作業摘要** (No Job Summary)。不在日誌中輸出作業結束時的摘要。 | `["/NJS"]`                                                           |
| `/L`        | **僅列出** (List only)。模擬執行，顯示將會被複製的檔案，但不實際操作。 | `["/L"]` (極度推薦在正式執行前用此參數進行測試)               |

**組合範例**：

若要排除所有 `.log` 檔案以及 `temp` 目錄，並複製 NTFS 安全性設定，您的 `extraArgs` 會是：

```json
"extraArgs": [
  "/XF",
  "*.log",
  "/XD",
  "temp",
  "/SEC"
]
```
